<div class="container">

  <ng-container *ngIf="group; else loadingGroupBlock">

    <h1 class="title is-3 has-text-centered">Gruppe &quot;{{group.name}}&quot;: Neue Sitzung erstellen</h1>


    <div class="columns">
      <div class="column is-three-fifths-desktop">

        <label class="label">
          Datum (
          <label for="dateDayOfMonth">Tag</label> -
          <label for="dateMonth">Monat</label> -
          <label for="dateYear">Jahr</label>
          ):
        </label>

        <div class="field has-addons">
          <div class="control is-expanded">
            <input type="number" id="dateDayOfMonth" class="input" min="1" max="31"
                   [(ngModel)]="creatableSession.dateDayOfMonth">
          </div>
          <div class="control">
            <button class="button is-static">.</button>
          </div>
          <div class="control is-expanded">
            <input type="number" id="dateMonth" class="input" min="1" max="12" [(ngModel)]="creatableSession.dateMonth">
          </div>
          <div class="control">
            <button class="button is-static">.</button>
          </div>
          <div class="control is-expanded">
            <input type="number" id="dateYear" class="input" min="2000" max="3000"
                   [(ngModel)]="creatableSession.dateYear">
          </div>
        </div>
      </div>

      <div class="column">
        <label class="label">
          Zeit (
          <label for="timeHours">Stunden</label> :
          <label for="timeMinutes">Minuten</label>
          ):
        </label>

        <div class="field has-addons">
          <div class="control is-expanded">
            <input type="number" id="timeHours" class="input" min="0" max="23" [(ngModel)]="creatableSession.timeHours">
          </div>
          <div class="control">
            <button class="button is-static">:</button>
          </div>
          <div class="control is-expanded">
            <input type="number" id="timeMinutes" class="input" min="0" max="59"
                   [(ngModel)]="creatableSession.timeMinutes">
          </div>
        </div>
      </div>
    </div>

    <div class="field">
      <label class="label">Regelsatz:</label>
      <div class="control">

        <div class="columns is-multiline">
          <div class="column is-2" *ngFor="let rs of ruleSets">
            <button class="button is-fullwidth" (click)="creatableSession.ruleSetId = rs.id" title="{{rs.name}}"
                    [ngClass]="{'is-link': creatableSession.ruleSetId === rs.id}">
              {{rs.name}}
            </button>
          </div>
        </div>

      </div>
    </div>

    <hr>

    <div class="field">
      <label class="label">1. Geber:</label>
      <div class="control">

        <div class="columns is-multiline">
          <div class="column is-1" *ngFor="let p of group.players">
            <button class="button is-fullwidth" (click)="updateDealer(p.player.id)" title="{{p.player.name}}"
                    [ngClass]="{'is-link': creatableSession.firstPlayerId === p.player.id}">
              {{p.player.abbreviation}}
            </button>
          </div>
        </div>

      </div>
    </div>

    <br>

    <div class="field">
      <label class="label">1. Vorhand:</label>
      <div class="control">

        <div class="columns is-multiline">
          <div class="column is-1" *ngFor="let p of group.players">
            <button class="button is-fullwidth" (click)="updatePreHand(p.player.id)" title="{{p.player.name}}"
                    [ngClass]="{'is-link': creatableSession.secondPlayerId === p.player.id}"
                    [disabled]="!playersForPreHand.includes(p.player)">
              {{p.player.abbreviation}}
            </button>
          </div>
        </div>

      </div>
    </div>

    <br>

    <div class="field">
      <label class="label">1. Mittelhand:</label>
      <div class="control">

        <div class="columns is-multiline">
          <div class="column is-1" *ngFor="let p of group.players">
            <button class="button is-fullwidth" (click)="updateMiddleHand(p.player.id)" title="{{p.player.name}}"
                    [ngClass]="{'is-link': creatableSession.thirdPlayerId === p.player.id}"
                    [disabled]="!playersForMiddleHand.includes(p.player)">
              {{p.player.abbreviation}}
            </button>
          </div>
        </div>

      </div>
    </div>

    <br>

    <div class="field">
      <label class="label">1. RÃ¼ckhand:</label>
      <div class="control">

        <div class="columns">
          <div class="column is-1" *ngFor="let p of group.players">
            <button class="button is-fullwidth" (click)="updateRearHand(p.player.id)" title="{{p.player.name}}"
                    [ngClass]="{'is-link': creatableSession.fourthPlayerId === p.player.id}"
                    [disabled]="!playersForRearHand.includes(p.player)">
              {{p.player.abbreviation}}
            </button>
          </div>
        </div>

      </div>
    </div>

    <hr>

    <button class="button is-link is-fullwidth" (click)="createSession()" [disabled]="createdSession">
      Sitzung starten
    </button>

    <br>

    <div class="notification is-primary" *ngIf="createdSession">
      Sitzung mit der ID {{createdSession.id}} wurde erstellt.
      <a [routerLink]="['../', 'sessions', createdSession.id]">Zur Sitzung</a>
    </div>

  </ng-container>

</div>

<ng-template #loadingGroupBlock>
  <div class="notification is-primary is-fullwidth">Lade Daten...</div>
</ng-template>
